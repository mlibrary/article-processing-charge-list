<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>APC Journals List</title>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
  <link href="https://cdn.datatables.net/v/dt/jq-3.7.0/dt-2.3.2/datatables.min.css" rel="stylesheet"
    integrity="sha384-dG72sN6C6+JA9moN/5eRa0GqXlYOpTivxgRRV4rTctUeb4ZNF6uuJ5NXmz+8+3Qi" crossorigin="anonymous">
  <link href="https://cdn.jsdelivr.net/npm/@umich-lib/web@latest/umich-lib.css" rel="stylesheet" />
  <style>
    #apcTable th:nth-child(7),
    #apcTable td:nth-child(7) {
      width: 150px !important;
      max-width: 150px !important;
      word-wrap: break-word;
      overflow-wrap: break-word;
    }
  </style>
</head>

<body>
  <m-universal-header></m-universal-header>
  <div>
    <m-website-header name="APC Journals" variant="dark">
      <a href="/" style="color: white;">Log in</a>
    </m-website-header>
  </div>
  <div class="container mt-5">
    <h1 class="mb-4">APC Journals</h1>
    <p>This table lists journals with Article Processing Charges (APCs) that are supported by the University of Michigan
      Library.</p>
    <table id="apcTable" class="m-table m-table--responsive-small"></table>
  </div>
  <script type="module"
    src="https://cdn.jsdelivr.net/npm/@umich-lib/web@latest/dist/umich-lib/umich-lib.esm.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.3.0/js/bootstrap.bundle.min.js"
    integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz"
    crossorigin="anonymous"></script>
  <script src="https://cdn.datatables.net/v/dt/jq-3.7.0/dt-2.3.2/datatables.min.js"
    integrity="sha384-qLLX0jMaWXMZrun5/ry13tv5MX78CJNleGaaJVXRuJCDiAwyjhYWsTM3Qk3VaKC3"
    crossorigin="anonymous"></script>
  <script type="text/javascript">
    $(document).ready(function () {
      var header = ["Journal Title", "eISSN", "Publisher", "Amount Funded", "Campuses Covered", "Coverage Years", "Link to Agreement"];
      var columns = [
        { title: "Journal Title", data: 1 },  // Maps to index 1 in data (Journal Title)
        { title: "eISSN", data: 2 },          // Maps to index 2 in data (eISSN)
        { title: "Publisher", data: 0 },      // Maps to index 0 in data (Publisher)
        { title: "Amount Funded", data: 3 },  // Maps to index 3 in data (Amount Funded)
        { title: "Campuses Covered", data: 4 }, // Maps to index 4 in data (Campuses Covered)
        { title: "Coverage Years", data: 6 }, // Maps to index 6 in data (Coverage Years)
        { title: "Link to Agreement", data: 5 } // Maps to index 5 in data (Link to Agreement)
      ];
      $('#apcTable').DataTable({
        ajax: "data.json",
        columns: columns,
        pageLength: 5,
        lengthMenu: [5, 10, 25, 50],
        order: [[1, 'asc']],
        autoWidth: false,
        columnDefs: [
          {
            "targets": [1, 2, 3, 4, 5], // All columns except "Journal Title" (now at index 0)
            "searchable": false
          },
          {
            "targets": 6, // "Link to Agreement" column (now at index 6)
            "width": "150px",
            "render": function (data, type, row) {
              if (type === 'display' && data) {
                return '<a href="' + data + '" target="_blank">' + data + '</a>';
              }
              return data;
            }
          }
        ]
      });
    });
  </script>
</body>

</html>